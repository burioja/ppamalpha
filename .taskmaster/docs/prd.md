
# 📄 위치기반 포스트 광고 플랫폼 PRD (Product Requirements Document)

- **프로젝트명**: 위치기반 포스트 광고 플랫폼
- **버전**: v1.0
- **작성일**: 2025.08.08
- **작성자**: ChatGPT (with User)

---

## 1. 문서 개요 (Document Overview)

- **문서 목적**: 본 문서는 위치 기반 광고 플랫폼의 제품 기획, 개발, 마케팅, 운영에 필요한 전반적인 요구사항을 정의하기 위해 작성되었다.
- **사용 대상자**: 기획자, 디자이너, 개발자, 마케터, 운영자, 투자자
- **문서 범위**:  
  - 사용자(수신자), 광고주, 관리자 역할 정의  
  - 광고 등록, 수령, 리워드 지급 등의 전체 플로우 포함

---

## 2. 배경 및 목적 (Background & Purpose)

### 2.1 광고시장 문제
- 오프라인 전단지 광고의 낮은 효율성
- 온라인 광고의 오프라인 방문 유도 한계
- 기존 광고 비용 부담, 광고 효과 분석 방안 부재
- 광고 노출(타겟팅)의 어려움

### 2.2 리워드 어플리케이션 문제
- 낮은 수율로 인한 실효성 저하

### 2.3 목적
- 위치 기반 디지털 광고로 물리적 공간과 온라인 광고를 연결
- 잠재적인 고객인 유동인구를 대상으로 광고 진행
- 타겟 조건 설정을 통한 맞춤형 광고 제공
- 사용자에게 리워드를 지급하여 자발적 참여 유도

---

## 3. 제품 개요 (Product Overview)

- **제품 유형**: Flutter 기반 모바일 애플리케이션
- **핵심 기능**:
  - 광고 마커 생성 및 위치 배포
  - 사용자의 위치 기반 광고 수령 및 리워드 지급
  - 광고주 리포트 제공 및 광고 조건 설정
  - 인박스(내 포스트/배포한/주운 포스트) 통합 관리 및 생성 엔트리
  - 플레이스(상점/서비스 프로필) 페이지 제공 및 포스트와 연계
- **경쟁 우위 요소**:
  - 높은 리워드 금액
  - 정교한 타겟 필터링
  - 광고 효과 분석 기능(광고 후 매장 방문 카운팅 등)

---

## 4. 사용자 정의 (User Definitions)

### 4.1 사용자 유형

| 사용자 유형 | 설명 |
|-------------|------|
| 일반 사용자 | 광고를 수령하고 리워드를 획득 |
| 광고주 | 광고를 등록하고 타겟을 설정하는 사용자 |
| 관리자 | 전체 플랫폼을 운영하고 감독하는 관리자 |




### 4.2 사용자 페르소나 예시

- **김유진 (28세, 여성, 직장인)**  
  점심시간에 회사 근처 광고를 수령하며 소소한 리워드로 점심값을 절약.

- **박지후 (43세, 남성, 음식점 사장)**  
  근처 직장인 대상으로 신메뉴 홍보를 위해 광고 등록.

### 4.3 용어 정의 (Glossary)

- **인박스(Inbox)**: 기존 "월렛" 명칭을 대체. 포스트 관련 모든 리소스를 한 곳에서 관리하는 화면. 상단 탭으로 `내 포스트`, `배포한 포스트`, `주운 포스트`를 제공하며, 포스트 생성(만들기) 엔트리를 포함함.
- **월렛(Wallet)**: 금전 관련 잔액/정산/충전/출금 등을 관리하는 화면으로 이동. 위치는 `마이페이지 > 월렛`.
- **플레이스(Place)**: 포스트를 제작한 개인/사업자의 상점 혹은 서비스 프로필 페이지. 제목/설명/위치(지도)/사진 등 정보를 제공하며, 해당 플레이스의 포스트 목록과 연계됨.

---

## 5. 사용자 시나리오 (User Scenarios)

### 일반 사용자

1. 앱 실행 후 지도에서 마커 확인
2. 실제 위치에 도달하면 수령 버튼 활성화
3. 광고 클릭 → 이미지 및 텍스트 확인
4. 리워드 자동 지급
5. 지갑에서 보상 확인

### 광고주

1. 전단지 이미지 업로드
2. 위치 설정 및 타겟 조건 입력
3. 광고 등록 후 실시간 수령 현황 확인
4. 수령률 낮을 경우 회수하거나 경매로 이동

---

## 6. 기능 명세 (Functional Requirements)

| 기능명 | 설명 | 우선순위 | 관련 화면 | 비고 |
|--------|------|----------|-----------|------|
| 광고 등록 | 이미지, 타겟, 수량, 단가 입력 | ★★★ | 광고 등록 화면 | 최근 템플릿 선택 기능 포함 |
| 위치 선택 | 지도에서 클릭하여 마커 위치 지정 | ★★★ | 지도 화면 | 위치 검색 및 주소 자동 입력 |
| 마커 표시 | 지도 위 마커 실시간 렌더링 | ★★★ | 메인 지도 화면 | 클릭 시 상세 광고 정보 노출 |
| 마커 수령 | 위치 인증 후 수령 가능 | ★★★ | 마커 상세 화면 | GPS 인증 필수 |
| 리워드 지급 | 수령 시 리워드 자동 지급 | ★★★ | 인박스, 마이페이지 > 월렛 | Firebase Functions 사용 |
| 인박스 | 내/배포한/주운 포스트 탭으로 통합 관리, 만들기 버튼 제공 | ★★★ | 인박스 화면 | 필터/정렬, 상세/편집 진입 |
| 플레이스 | 플레이스 생성/편집/상세, 포스트와 연계 | ★★☆ | 플레이스 화면 | 지도/사진/설명/카테고리 |
| 마커 회수 | 직접 수동 또는 자동 회수 가능 | ★★☆ | 마커 관리 화면 | 잔여 수량 또는 만료 시점 기준 |
| 이미지 업로드 | 전단지용 이미지 업로드 | ★★★ | 광고 등록 화면 | Firebase Storage 연동 |
| 리포트 기능 | 광고 효과 리포트 제공 | ★★☆ | 광고 리포트 화면 | 클릭률, 수령률 등 포함 |
| 예치금 충전, 출금 | 예치금 충전 및 출금 | ★★☆ | 마이페이지 > 월렛 | 계좌 연동 포함 |
| 개인정보 | 개인정보 설정 변경 | ★★☆ | 마이페이지 > 개인정보 | 알림/권한/계정 연결 포함 |
| 로그인, 회원가입 |로그인, 회원가입 | ★★☆ | 로그인, 회원가입화면 | 계좌 연동 포함 |
---

## 7. 비기능 요구사항 (Non-functional Requirements)

| 항목 | 설명 |
|------|------|
| 성능 | 지도 렌더링 3초 이내, 위치 인증 응답 2초 이내 |
| 보안 | 사용자 인증 Firebase Auth 기반, 관리자 권한 분리 |
| 접근성 | 고령자 고려 큰 버튼, 명확한 UI/UX 제공 |
| 확장성 | 10만 개 마커 동시 처리 가능 구조 |
| 로깅 | 광고 수령 및 리워드 지급 내역 기록 |
| 백업 | 지갑 내역, 광고 데이터 주기적 백업 및 보존 |

---

## 8. UI/UX 요구사항 (UI/UX Requirements)

- **지도 중심 화면**:
  - 마커 표시, "내 위치 이동", "이 위치에 뿌리기" 버튼 고정
  - 마커 클릭 시 팝업 및 상세 이동

- **전단지 등록 화면**:
  - 이미지 업로드, 가격/수량 설정
  - 타겟 조건 필터 추가, 템플릿 불러오기 기능

- **인박스 화면**:
  - 상단 탭: `내 포스트`, `배포한 포스트`, `주운 포스트`
  - `만들기` 버튼으로 포스트 생성 진입, 각 카드에서 상세/편집 이동
  - 검색/필터(상태, 기간), 정렬(최신, 수령수 등)

- **플레이스 화면**:
  - 헤더(제목/카테고리/평점), 설명, 사진 갤러리
  - 위치 지도 및 길찾기 링크, 연락처/운영시간
  - 플레이스의 포스트 목록(배포 중/예정/종료 구분)

- **광고 상세 화면**:
  - 광고 이미지, 내용, 마커 수량 및 설정 요약
  - 회수, 방어, 경매 기능은 권한 따라 노출

- **마이페이지 > 월렛 화면**:
  - 잔액, 적립/차감 내역(트랜잭션), 충전/출금 버튼
  - 본인 인증/계좌 연결, 정산 상태 확인

---

## 9. 데이터 요구사항 (Data Requirements)

### 9.1 Firestore 컬렉션 구조

```plaintext
/users/{userId}
  - email
  - nickname
  - walletBalance   // (선택) 파생 필드. 정산은 트랜잭션 기준
  - receivedPosts: [postId]

/posts/{postId}
  - ownerId
  - placeId           // 연결된 플레이스 ID
  - imageUrl
  - rewardAmount
  - quantity
  - receivedCount
  - location: {lat, lng}
  - target: {gender, age, interests}
  - createdAt
  - expiresAt

/places/{placeId}
  - ownerId
  - title
  - description
  - location: {lat, lng}
  - address
  - images: [url]
  - category
  - tags: [string]
  - contact: {phone, url}
  - hours: {mon..sun}
  - createdAt, updatedAt

/rewards/{rewardId}
  - userId
  - postId
  - amount
  - timestamp
```

### 9.2 Firebase Storage 구조

```plaintext
/post_images/{userId}/{postId}/image.jpg
```

### 9.3 월렛/트랜잭션 구조

```plaintext
/walletTransactions/{txId}
  - userId
  - type: 'reward' | 'deposit' | 'withdraw' | 'adjust'
  - amount
  - currency: 'KRW'
  - status: 'pending' | 'completed' | 'failed'
  - reference: { postId?, rewardId?, externalId? }
  - method: { provider: 'toss' | 'inicis' | 'etc', accountId? }
  - createdAt, updatedAt

// (선택) 사용자별 월렛 스냅샷
/wallets/{userId}
  - balance
  - lastTxAt
```

---

## 10. 기술 스택 (Tech Stack)

| 구성 요소        | 기술                              |
|------------------|-----------------------------------|
| 프론트엔드       | Flutter                           |
| 백엔드           | Firebase Functions (Node.js)      |
| 인증 시스템      | Firebase Auth                     |
| 데이터베이스      | Firebase Firestore                |
| 파일 저장        | Firebase Storage                  |
| 지도 API         | Google Maps                       |
| 검색 시스템      | Meilisearch                       |
| 결제/에스크로     | 외부 API 연동 예정 (예: 타자페이 등) |

---

## 11. 릴리즈 계획 (Release Plan)

| 단계             | 기간           | 주요 내용                                   |
|------------------|----------------|----------------------------------------------|
| 1단계 (MVP)       | 2025.08~09     | 광고 등록, 마커 생성, 수령, 리워드 지급 기능 구현 |
| 2단계             | 2025.09~10     | 광고 리포트, 타겟 필터링 고도화, 템플릿 기능 추가 |
| 3단계             | 2025.10~11     | 광고 경매, 방어 시스템, 푸시 알림 도입             |

---

## 12. 성공 지표 (Success Metrics)

| 항목               | 설명                                                  |
|--------------------|--------------------------------------------------------|
| DAU / MAU          | 일간 및 월간 활성 사용자 수                             |
| 광고 수령률        | 등록된 광고 대비 실제 수령된 비율                        |
| 광고주 유지율       | 광고를 2회 이상 등록한 광고주 비율                       |
| 사용자 재방문율     | 광고 수령 후 7일 이내 앱에 다시 접속한 사용자 비율        |
| 총 수익            | 광고 등록 금액, 광고 수수료, 경매 수수료 등을 포함한 총액 |

---

## 13. 리스크 및 제약사항 (Risks & Constraints)

| 항목              | 설명                                                                 |
|-------------------|----------------------------------------------------------------------|
| GPS 위조           | 사용자가 GPS를 조작하여 실제 위치에 도달하지 않고 리워드를 수령할 수 있음 |
| 법적 제약          | 에스크로 및 현금 리워드 제공 시 전자금융법 및 전자상거래법의 적용 가능성 |
| 리워드 남용         | 동일 사용자가 광고를 반복 등록하여 자작극을 통한 리워드 획득 시도 가능성 |
| 서버 비용 증가      | 마커 수량 증가에 따른 지도 렌더링 및 검색 비용 증가 예상                |
| 차별적 타겟 필터     | 특정 성별, 나이 등을 타겟팅할 경우 차별로 인식될 수 있음 (법적 검토 필요)  |

---

## 14. 부록 (Appendix)

- [ ] 전단지 등록 화면 와이어프레임 (Figma / Sketch)
- [ ] 경쟁 플랫폼 분석 표 (예: Wadiz, 당근마켓 광고 등)
- [ ] Meilisearch 인덱싱 구조도 및 API 예시
- [ ] 사용자 인터뷰 설문지 및 응답 요약
