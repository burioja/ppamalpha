# PPAM (Post-based Proximity Advertisement & Marketing) 플랫폼 PRD v2.2

## 📋 프로젝트 개요

### 프로젝트명
**PPAM** - Post-based Proximity Advertisement & Marketing Platform

### 프로젝트 설명
습득 시 리워드가 지급되는 타겟팅 광고를 지도에 표시하여 인근의 소비자가 능동적으로 이동하여 습득하게 함으로써 기존 광고 매체의 한계와 단점을 보완한 새로운 광고 플랫폼

### 핵심 가치 제안
- **지도 기반 근접 광고**: 사용자의 실제 위치를 기반으로 한 정확한 타겟팅
- **리워드 기반 참여 유도**: 포스트 수집 시 리워드 지급으로 적극적 참여 유도
- **원스탑 경제 플랫폼**: 홍보, 판매, 구매, 관리, 예약, 정보공유 등 모든 경제 활동 통합
- **범세계적 운영**: 국가에 국한되지 않는 글로벌 플랫폼

## 🎯 타겟 사용자

### 주요 사용자 그룹
1. **발행자 (Advertisers)**
   - 판매자: 전단지 배포
   - 호스트: 팜플렛 배포
   - 안내자: 안내문 배포
   - 요구자: 퀘스트 배포

2. **소비자 (Consumers)**
   - 전단지 수취자
   - 팜플렛 참가자
   - 안내문 관계인
   - 퀘스트 수행자

3. **관리자 (Administrators)**
   - 개인/단체 관리자
   - 중간관리자

## 🏗️ 시스템 아키텍처

### 기술 스택
- **Frontend**: Flutter (iOS, Android, Web)
- **Backend**: Firebase (Firestore, Authentication, Storage)
- **지도 서비스**: Flutter Map + OpenStreetMap
- **위치 서비스**: Geolocator
- **이미지 처리**: Image Picker, Firebase Storage

### 핵심 모듈
1. **Map System**: 지도 기반 마커 표시 및 상호작용
2. **Post System**: 포스트 생성, 편집, 배포 관리
3. **User Dashboard**: 사용자 프로필, 지갑, 예산 관리
4. **Performance System**: 앱 성능 최적화
5. **Place System**: 장소 관리 및 검색

## 📱 주요 기능

### 1. 지도 기반 마커 시스템

#### 1.1 마커 표시
- **포스트 마커**: 다른 사용자가 배포한 포스트를 지도에 표시
- **현재 위치 마커**: 사용자의 현재 위치 표시
- **집/일터 마커**: 사용자가 등록한 집과 일터 위치 표시
- **실시간 업데이트**: Firestore 스트림을 통한 실시간 마커 업데이트

#### 1.2 Fog of War 시스템
- **포그레벨 1**: 방문한 지역 (완전히 밝음)
- **포그레벨 2**: 인근 지역 (부분적으로 밝음)
- **포그레벨 3**: 미방문 지역 (어둠)
- **타일 기반 시스템**: S2 타일을 활용한 효율적인 포그레벨 관리

#### 1.3 마커 상호작용
- **탭**: 마커 상세 정보 표시
- **수집**: 포스트 수집 및 리워드 지급
- **회수**: 배포자가 자신의 포스트 회수 가능

### 2. 포스트 관리 시스템

#### 2.1 포스트 생성
- **기본 정보**: 제목, 설명, 리워드 금액
- **미디어**: 이미지, 오디오, 텍스트 지원
- **타겟팅**: 연령, 성별, 관심사 기반 타겟팅
- **만료일**: 자동 만료 설정

#### 2.2 포스트 배포
- **위치 선택**: 지도에서 롱프레스로 배포 위치 선택
- **수량 설정**: 배포할 포스트 수량 입력
- **가격 설정**: 개당 가격 및 총 가격 계산
- **마커 생성**: 선택된 위치에 마커 생성

#### 2.3 포스트 수집
- **근접 수집**: 30m 이내에서만 수집 가능
- **위치 인증**: GPS 기반 정확한 위치 확인
- **리워드 지급**: 수집 시 자동으로 리워드 지급
- **중복 방지**: 이미 수집한 포스트는 재수집 불가

### 3. 사용자 대시보드

#### 3.1 지갑 시스템
- **잔액 관리**: 현재 보유 금액 표시
- **거래 내역**: 수집/배포 관련 거래 기록
- **예치금 관리**: 배포 시 예치된 금액 관리

#### 3.2 포스트 관리
- **내 포스트**: 사용자가 생성한 포스트 목록
- **수집한 포스트**: 사용자가 수집한 포스트 목록
- **배포 현황**: 배포한 포스트의 수집 현황

#### 3.3 프로필 관리
- **기본 정보**: 이름, 연령, 성별, 관심사
- **위치 정보**: 집 주소, 일터 주소 등록
- **설정**: 알림, 개인정보 보호 설정

### 4. 검색 및 필터링

#### 4.1 포스트 검색
- **키워드 검색**: 제목, 설명 기반 검색
- **카테고리 필터**: 전단지, 팜플렛, 안내문, 퀘스트
- **거리 필터**: 1km, 3km, 5km 반경 설정
- **리워드 필터**: 최소 리워드 금액 설정

#### 4.2 고급 필터
- **내 포스트만 보기**: 자신이 배포한 포스트만 표시
- **쿠폰만 보기**: 사용 가능한 쿠폰 포스트만 표시
- **정렬**: 거리순, 최신순, 리워드순

## 🔧 기술적 특징

### 1. 성능 최적화
- **마커 클러스터링**: 많은 마커를 효율적으로 표시
- **지연 로딩**: 필요한 마커만 로딩
- **캐싱 시스템**: 포그레벨 및 마커 데이터 캐싱
- **가상화**: 대용량 데이터 처리 최적화

### 2. 실시간 동기화
- **Firestore 스트림**: 실시간 데이터 업데이트
- **위치 기반 쿼리**: 사용자 위치 변경 시 자동 마커 업데이트
- **오프라인 지원**: 네트워크 연결이 불안정해도 기본 기능 유지

### 3. 보안 및 인증
- **Firebase Authentication**: 안전한 사용자 인증
- **위치 스푸핑 방지**: GPS 드리프트 및 속도 기반 검증
- **권한 관리**: 역할 기반 접근 제어

## 📊 데이터 모델

### 1. 포스트 (Post)
```dart
class PostModel {
  String postId;
  String creatorId;
  String title;
  String description;
  int reward;
  List<String> mediaType;
  List<String> mediaUrl;
  List<String> thumbnailUrl;
  List<int> targetAge;
  String targetGender;
  List<String> targetInterest;
  DateTime expiresAt;
  bool isActive;
  bool isCollected;
  bool isDistributed;
  // ... 기타 필드
}
```

### 2. 마커 (Marker)
```dart
class MarkerModel {
  String markerId;
  String postId;
  String title;
  LatLng position;
  int quantity;
  String creatorId;
  DateTime createdAt;
  DateTime expiresAt;
  // ... 기타 필드
}
```

### 3. 사용자 (User)
```dart
class UserModel {
  String uid;
  String displayName;
  String email;
  int age;
  String gender;
  List<String> interests;
  LatLng homeLocation;
  List<LatLng> workLocations;
  int balance;
  bool isPremium;
  // ... 기타 필드
}
```

## 🚀 배포 및 운영

### 1. 플랫폼 지원
- **iOS**: App Store 배포
- **Android**: Google Play Store 배포
- **Web**: PWA (Progressive Web App) 지원

### 2. 확장성
- **글로벌 확장**: 다국어 지원 준비
- **모듈화**: 기능별 독립적 개발 및 배포
- **API 확장**: 외부 서비스 연동 준비

### 3. 모니터링
- **성능 모니터링**: 앱 성능 및 사용자 행동 분석
- **에러 추적**: 실시간 에러 모니터링
- **사용자 피드백**: 인앱 피드백 시스템

## 📈 향후 계획

### 1. 단기 목표 (3개월)
- [ ] 핵심 기능 안정화
- [ ] 사용자 피드백 수집 및 개선
- [ ] 성능 최적화
- [ ] 보안 강화

### 2. 중기 목표 (6개월)
- [ ] 고급 타겟팅 기능 추가
- [ ] AI 기반 추천 시스템
- [ ] 소셜 기능 추가
- [ ] 결제 시스템 통합

### 3. 장기 목표 (1년)
- [ ] 글로벌 확장
- [ ] B2B 솔루션 제공
- [ ] 데이터 분석 플랫폼
- [ ] 생태계 확장

## 🔍 현재 개발 상태

### 완료된 기능
- ✅ 기본 지도 시스템
- ✅ 마커 표시 및 상호작용
- ✅ 포스트 생성 및 편집
- ✅ 포스트 배포 시스템
- ✅ 사용자 인증
- ✅ 기본 대시보드
- ✅ Fog of War 시스템

### 개발 중인 기능
- 🔄 고급 필터링 시스템
- 🔄 실시간 알림
- 🔄 결제 시스템
- 🔄 성능 최적화

### 계획된 기능
- 📋 AI 추천 시스템
- 📋 소셜 기능
- 📋 고급 분석 도구
- 📋 B2B 관리 도구

---

**문서 버전**: v2.2  
**최종 업데이트**: 2024년 12월  
**작성자**: PPAM 개발팀
