# PPAM (Post Place Advertisement Management) Application PRD

## 📋 개요

### 제품명
PPAM (Post Place Advertisement Management) - 위치 기반 포스트 관리 시스템

### 버전
2.0.0

### 작성일
2025-10-23

### 목적
사용자가 특정 위치에 디지털 포스트를 배포하고, 다른 사용자가 해당 위치에서 포스트를 수령할 수 있는 위치 기반 소셜 플랫폼

---

## 🎯 비즈니스 요구사항

### 핵심 가치
- **위치 기반**: 실제 물리적 위치를 기반으로 한 포스트 배포 및 수령
- **실시간 상호작용**: 실시간으로 포스트 생성, 배포, 수령
- **지역 커뮤니티**: 특정 지역 내 사용자들 간의 소통
- **수익 모델**: 포스트 배포 시 리워드 지급 시스템

### 비즈니스 목표
1. 지역 기반 디지털 광고 플랫폼 구축
2. 사용자 참여도 증대를 통한 활성 커뮤니티 형성
3. 위치 기반 마케팅 솔루션 제공
4. 포인트 기반 경제 시스템 운영

---

## 👥 사용자 스토리

### 일반 사용자
```
As a 일반 사용자,
I want 내 집이나 일터 근처에서 포스트를 배포하고 수령할 수 있도록 하고,
So that 지역 커뮤니티와 소통하며 정보를 공유할 수 있다.
```

### 슈퍼사이트 사용자
```
As a 슈퍼사이트 사용자,
I want 더 넓은 범위(3km)에서 포스트를 배포할 수 있도록 하고,
So that 더 많은 지역을 커버하며 비즈니스를 확장할 수 있다.
```

### 장소 관리자
```
As a 장소 관리자,
I want 내 장소를 등록하고 관리할 수 있도록 하고,
So that 고객들이 내 장소에 포스트를 배포할 수 있도록 할 수 있다.
```

---

## 🏗️ 시스템 아키텍처

### 기술 스택
- **Frontend**: Flutter (크로스 플랫폼)
- **Backend**: Firebase (Firestore, Auth, Storage, Functions)
- **지도 서비스**: OpenStreetMap (OSM)
- **위치 서비스**: Geolocator, Nominatim
- **상태 관리**: Provider Pattern

### 아키텍처 패턴
- **Clean Architecture**: 계층별 분리 (Presentation, Domain, Data)
- **Feature-based**: 기능별 모듈화
- **Provider Pattern**: 상태 관리

---

## 🔧 핵심 기능 요구사항

### 1. 사용자 인증 시스템
- **기능**: Firebase Auth 기반 로그인/회원가입
- **특징**: 이메일 인증, 소셜 로그인 지원
- **보안**: 사용자 타입별 권한 관리

### 2. 지도 시스템 (Map System)
- **핵심 기능**:
  - 실시간 지도 표시 (OSM 기반)
  - 현재 위치 추적
  - 마커 클러스터링
  - 포그 오브 워 (Fog of War) 시스템
  - 필터링 및 검색

- **고급 기능**:
  - Mock 위치 모드 (개발/테스트용)
  - 타일 캐싱 시스템
  - 마커 상호작용 (클릭, 롱프레스)
  - 지도 필터 (상태, 거리, 타입별)

### 3. 포스트 시스템 (Post System)
- **포스트 생성**:
  - 멀티미디어 지원 (이미지, 사운드, 텍스트, 영상)
  - 타겟팅 설정 (성별, 나이, 거리)
  - 가격 자동 계산 (미디어 크기 기반)
  - 배포 옵션 (거리, 우편함, 광고보드)

- **포스트 배포**:
  - 위치 기반 배포
  - 거리 제한 (일반: 1km, 슈퍼사이트: 3km)
  - 자동 만료 시스템
  - 실시간 상태 관리

- **포스트 수령**:
  - 근접 수령 (거리 기반)
  - 우편함 수령 (집/일터 기반)
  - 광고보드 수령 (클릭 기반)

### 4. 사용자 대시보드 (User Dashboard)
- **인박스 시스템**:
  - 내 포스트 관리
  - 수령한 포스트 관리
  - 통계 및 분석

- **포인트 시스템**:
  - 포인트 잔액 관리
  - 거래 내역
  - 포인트 충전/사용

- **설정 관리**:
  - 프로필 관리
  - 위치 설정 (집, 일터)
  - 알림 설정

### 5. 장소 관리 시스템 (Place System)
- **장소 등록**:
  - 기본 정보 (이름, 설명, 주소)
  - 카테고리 분류
  - 이미지 업로드
  - 운영시간 설정

- **장소 관리**:
  - 장소 수정/삭제
  - 통계 및 분석
  - 인증 시스템

### 6. 관리자 시스템 (Admin System)
- **사용자 관리**:
  - 포인트 지급/차감
  - 사용자 권한 관리
  - 통계 모니터링

- **시스템 관리**:
  - 데이터 정리
  - 성능 모니터링
  - 백업 관리

---

## 📱 사용자 인터페이스

### 메인 화면 구조
```
┌─────────────────────────────────┐
│ [위치] [포인트] [설정]          │ ← 상단 바
├─────────────────────────────────┤
│                                 │
│           지도 화면              │ ← 메인 컨텐츠
│                                 │
├─────────────────────────────────┤
│ [지도] [인박스]                 │ ← 하단 탭
└─────────────────────────────────┘
```

### 인박스 화면 구조
```
┌─────────────────────────────────┐
│ [내 포스트] [받은 포스트] [통계] │ ← 탭 바
├─────────────────────────────────┤
│ [검색] [필터] [정렬]            │ ← 필터 섹션
├─────────────────────────────────┤
│                                 │
│        포스트 카드 목록          │ ← 포스트 목록
│                                 │
└─────────────────────────────────┘
```

---

## 🔄 사용자 플로우

### 포스트 생성 플로우
1. **장소 선택** → 배포자 선택 화면
2. **포스트 작성** → 제목, 내용, 미디어, 타겟팅 설정
3. **배포 설정** → 위치, 거리, 가격 설정
4. **배포 실행** → 실제 배포 및 마커 생성

### 포스트 수령 플로우
1. **지도 탐색** → 마커 발견
2. **마커 클릭** → 포스트 상세 정보 확인
3. **수령 실행** → 포스트 수령 및 포인트 획득
4. **인박스 확인** → 수령한 포스트 관리

### 장소 등록 플로우
1. **장소 정보 입력** → 기본 정보, 카테고리, 주소
2. **이미지 업로드** → 장소 사진 등록
3. **운영시간 설정** → 영업시간, 휴무일 설정
4. **등록 완료** → 장소 활성화

---

## 🛠 기술적 요구사항

### 성능 요구사항
- **지도 로딩**: 3초 이내
- **포스트 생성**: 5초 이내
- **마커 표시**: 1초 이내
- **이미지 업로드**: 10초 이내 (1MB 기준)

### 보안 요구사항
- **사용자 인증**: Firebase Auth
- **데이터 암호화**: Firestore 보안 규칙
- **파일 업로드**: Firebase Storage 보안
- **API 보안**: Firebase Functions 인증

### 확장성 요구사항
- **사용자 수**: 10만 명 동시 접속 지원
- **포스트 수**: 100만 개 포스트 관리
- **지역 확장**: 전국 단위 서비스
- **다국어**: 한국어, 영어 지원

---

## 📊 데이터 모델

### 핵심 엔티티

#### PostModel (포스트)
```dart
class PostModel {
  final String postId;
  final String creatorId;
  final String creatorName;
  final DateTime createdAt;
  final int reward;
  final PostStatus status;
  final DeploymentType deploymentType;
  final List<String> mediaType;
  final List<String> mediaUrl;
  final List<String> thumbnailUrl;
  final GeoPoint location;
  final int radius;
  final DateTime expiresAt;
  final Map<String, dynamic> targeting;
}
```

#### UserModel (사용자)
```dart
class UserModel {
  final String id;
  final String nickname;
  final String email;
  final GeoPoint? homeLocation;
  final UserType userType;
  final String? workplaceId;
  final DateTime createdAt;
}
```

#### PlaceModel (장소)
```dart
class PlaceModel {
  final String id;
  final String name;
  final String description;
  final GeoPoint? location;
  final String? category;
  final List<String> imageUrls;
  final Map<String, dynamic>? operatingHours;
  final String createdBy;
  final bool isActive;
  final bool isVerified;
}
```

---

## 🎨 디자인 시스템

### 색상 팔레트
- **Primary**: #4D4DFF (파란색)
- **Secondary**: #FF6B35 (주황색)
- **Success**: #4CAF50 (초록색)
- **Warning**: #FF9800 (노란색)
- **Error**: #F44336 (빨간색)

### 타이포그래피
- **제목**: 18px, Bold
- **부제목**: 16px, Medium
- **본문**: 14px, Regular
- **캡션**: 12px, Regular

### 컴포넌트
- **버튼**: Material Design 3
- **카드**: 12px 둥근 모서리, 그림자 효과
- **입력 필드**: Outline 스타일
- **탭**: Material Design 탭

---

## 📈 성공 지표

### 사용자 지표
- **일일 활성 사용자 (DAU)**: 1,000명
- **월간 활성 사용자 (MAU)**: 10,000명
- **사용자 유지율**: 70% (7일), 40% (30일)
- **평균 세션 시간**: 15분

### 비즈니스 지표
- **포스트 생성 수**: 1,000개/일
- **포스트 수령 수**: 5,000개/일
- **장소 등록 수**: 100개/월
- **포인트 거래량**: 1,000,000P/월

### 기술 지표
- **앱 크래시율**: 0.1% 이하
- **API 응답 시간**: 2초 이내
- **이미지 로딩 시간**: 3초 이내
- **지도 로딩 시간**: 5초 이내

---

## 🚧 알려진 제한사항

### 현재 제한사항
1. **오프라인 모드**: 네트워크 연결 필수
2. **다국어 지원**: 한국어만 지원
3. **결제 시스템**: 포인트 충전 기능 미구현
4. **푸시 알림**: 실시간 알림 미구현

### 기술적 제한사항
1. **Firebase 의존성**: Google 서비스 의존
2. **위치 정확도**: GPS 정확도에 의존
3. **이미지 최적화**: 대용량 이미지 처리 제한
4. **실시간 동기화**: 네트워크 상태에 의존

---

## 🔮 향후 개선 계획

### 단기 (1-3개월)
1. **푸시 알림 시스템** 구현
2. **결제 시스템** 통합
3. **오프라인 모드** 지원
4. **성능 최적화** 개선

### 중기 (3-6개월)
1. **다국어 지원** (영어)
2. **AI 추천 시스템** 도입
3. **소셜 기능** 강화
4. **웹 버전** 개발

### 장기 (6개월+)
1. **글로벌 확장** 준비
2. **AR/VR 기능** 도입
3. **블록체인 통합** 검토
4. **IoT 연동** 기능

---

## 📝 구현 상태

### ✅ 완료된 기능
- [x] 사용자 인증 시스템
- [x] 지도 시스템 (OSM 기반)
- [x] 포스트 생성/배포/수령
- [x] 인박스 시스템
- [x] 장소 관리 시스템
- [x] 포인트 시스템 (기본)
- [x] 관리자 시스템
- [x] 마커 클러스터링
- [x] 포그 오브 워 시스템
- [x] 필터링 및 검색

### 🚧 진행 중인 기능
- [ ] 성능 최적화
- [ ] UI/UX 개선
- [ ] 버그 수정

### ❌ 미구현 기능
- [ ] 푸시 알림 시스템
- [ ] 결제 시스템
- [ ] 오프라인 모드
- [ ] 다국어 지원
- [ ] 웹 버전

---

## 🏢 팀 구성

### 개발팀
- **프론트엔드**: Flutter 개발자
- **백엔드**: Firebase 개발자
- **UI/UX**: 디자이너
- **QA**: 테스터

### 운영팀
- **PM**: 프로젝트 매니저
- **마케팅**: 마케팅 담당자
- **고객지원**: CS 담당자

---

## 📞 연락처

### 개발팀
- **이메일**: dev@ppam.com
- **슬랙**: #ppam-dev
- **GitHub**: github.com/ppam

### 문서 관리
- **최종 수정**: 2025-10-23
- **다음 리뷰**: 2025-11-23
- **버전**: 2.0.0

---

## 📚 참고 문서

### 기술 문서
- [Flutter 개발 가이드](docs/flutter_guide.md)
- [Firebase 설정 가이드](docs/firebase_setup.md)
- [API 문서](docs/api_documentation.md)

### 사용자 문서
- [사용자 매뉴얼](docs/user_manual.md)
- [FAQ](docs/faq.md)
- [문제 해결 가이드](docs/troubleshooting.md)

---

*이 문서는 PPAM 애플리케이션의 전체적인 요구사항과 기능을 정의합니다. 지속적인 업데이트와 개선을 통해 더 나은 서비스를 제공할 예정입니다.*
